{"version":3,"sources":["text-canvas.js"],"names":["global","factory","exports","module","define","amd","TextCanvas","this","_classCallCheck","instance","Constructor","TypeError","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","protoProps","staticProps","text","textStyle","undefined","createCanvas","value","_canvas","document","createElement","_ctx","getContext","style","_style","font","fontStyle","fontVariant","fontWeight","fontSize","fontFamily","textAlign","textBaseline","fillStyle","textColor","shadowBlur","shadowOffsetX","shadowOffsetY","shadowColor","forcedLines","_text","split","wordWrap","spaceMeasure","measureText","lines","lineWidth","lineContents","lineWords","j","wordMeasure","width","push","trim","get","wordBreak","set","constructor","name","RangeError","defaultTextStyle","_resolution","Number","isNaN","window","devicePixelRatio","parseFloat","Math","sign"],"mappings":"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","file":"text-canvas.min.js","sourcesContent":["(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global.TextCanvas = factory());\n}(this, (function () { 'use strict';\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar TextCanvas = function () {\n  function TextCanvas(text) {\n    var textStyle = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var resolution = arguments[2];\n\n    _classCallCheck(this, TextCanvas);\n\n    this.text = text;\n    this.textStyle = textStyle;\n\n    this.createCanvas();\n  }\n\n  _createClass(TextCanvas, [{\n    key: 'createCanvas',\n    value: function createCanvas() {\n      this._canvas = document.createElement('canvas');\n      this._ctx = this._canvas.getContext('2d');\n\n      return this._canvas;\n    }\n  }, {\n    key: 'applyTextStyles',\n    value: function applyTextStyles() {\n      var style = this._style;\n\n      this._ctx.font = style.fontStyle + ' ' + style.fontVariant + ' ' + style.fontWeight + ' ' + style.fontSize + ' ' + style.fontFamily;\n      this._ctx.textAlign = style.textAlign;\n      this._ctx.textBaseline = style.textBaseline;\n      this._ctx.fillStyle = style.textColor;\n      this._ctx.shadowBlur = style.shadowBlur;\n      this._ctx.shadowOffsetX = style.shadowOffsetX;\n      this._ctx.shadowOffsetY = style.shadowOffsetY;\n      this._ctx.shadowColor = style.shadowColor;\n    }\n  }, {\n    key: 'createTextLines',\n    value: function createTextLines() {\n      var forcedLines = this._text.split('\\n');\n\n      if (!this._style.wordWrap) {\n        return forcedLines;\n      }\n\n      var spaceMeasure = this._ctx.measureText(' ');\n      var lines = [];\n      var lineWidth = 0;\n      var lineContents = '';\n\n      for (var i = 0; i < forcedLines.length; i++) {\n        var lineWords = forcedLines.split(' ');\n\n        for (var j = 0; j < lineWords.length; j++) {\n          var wordMeasure = this._ctx.measureText(lineWords[j]);\n\n          if (lineWidth + wordMeasure.width > this._style.wordWrap) {\n            if (j) {\n              lines.push(lineContents.trim());\n            }\n            lineWidth = wordMeasure.width;\n            lineContents = lineWords[j];\n          } else {\n            lineWidth += wordMeasure.width + spaceMeasure.width;\n            lineContents += lineWords[j] + ' ';\n          }\n        }\n\n        lines.push(lineContents.trim());\n        lineWidth = 0;\n        lineContents = '';\n      }\n    }\n  }, {\n    key: 'defaultTextStyle',\n    get: function get() {\n      return {\n        fontFamily: 'sans-serif',\n        fontStyle: 'normal',\n        fontWeight: 'normal',\n        fontVariant: 'normal',\n        fontSize: '16px',\n        textAlign: 'left',\n        textBaseline: 'ideographic',\n        textColor: 'black',\n        shadowBlur: 0,\n        shadowOffsetX: 0,\n        shadowOffsetY: 0,\n        shadowColor: 'black',\n        wordWrap: false,\n        wordBreak: false\n      };\n    }\n  }, {\n    key: 'text',\n    get: function get() {\n      return this._text;\n    },\n    set: function set(value) {\n      if (typeof value !== 'string') {\n        throw new TypeError(this.constructor.name + ': \\'text\\' must be a string.');\n      }\n\n      value = value.trim();\n\n      if (!value) {\n        throw new RangeError(this.constructor.name + ': \\'text\\' is empty.');\n      }\n\n      this._text = value;\n      return this._text;\n    }\n  }, {\n    key: 'textStyle',\n    get: function get() {\n      return this._style;\n    },\n    set: function set() {\n      var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      this._style = _extends({}, this.defaultTextStyle, value);\n\n      return this._style;\n    }\n  }, {\n    key: 'resolution',\n    get: function get() {\n      return this._resolution;\n    },\n    set: function set(value) {\n      if (value !== void 0 && Number.isNaN(value)) {\n        throw new TypeError(this.constructor.name + ': \\'resolution\\' must be a number.');\n      }\n\n      if (value === 0) {\n        throw new RangeError(this.constructor.name + ': \\'resolution\\' must be greater than 0.');\n      }\n\n      value = value || window.devicePixelRatio || 1;\n      value = parseFloat(value);\n\n      if (Math.sign(value) === -1) {\n        throw new RangeError(this.constructor.name + ': \\'resolution\\' must be a positive number.');\n      }\n\n      this._resolution = value;\n\n      return this._resolution;\n    }\n  }]);\n\n  return TextCanvas;\n}();\n\nreturn TextCanvas;\n\n})));\n//# sourceMappingURL=text-canvas.js.map\n"]}